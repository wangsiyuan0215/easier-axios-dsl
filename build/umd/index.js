(function(c,_){typeof exports=="object"&&typeof module<"u"?_(exports,require("qs"),require("axios")):typeof define=="function"&&define.amd?define(["exports","qs","axios"],_):(c=typeof globalThis<"u"?globalThis:c||self,_(c["easier-axios-dsl"]={},c.qs,c.axios))})(this,function(c,_,N){"use strict";const I={JSON:"application/json",FORM_DATA:"multipart/form-data"},d={JSON:"json",TEXT:"text",BLOB:"blob",ARRAY_BUFFER:"arraybuffer",STREAM:"stream",DOCUMENT:"document"},T={GET:"GET",PUT:"PUT",POST:"POST",DELETE:"DELETE",PATCH:"PATCH",OPTIONS:"OPTIONS",HEAD:"HEAD"},U=({requestInterceptors:t,responseInterceptors:e,...s})=>{const n=N.create({timeout:3e3,...s});return t.length&&n.interceptors.request.use(...t),e.length&&n.interceptors.response.use(...e),async function({url:o,method:r,data:O,params:u,returnResponse:D,__isFormData:E,...S}){const{headers:A={},responseType:f,...l}=S||{};try{const a=await n({url:o,method:r,headers:{...A,"Content-Type":E?I.FORM_DATA:A&&A["Content-Type"]||I.JSON},...[T.POST,T.PUT,T.PATCH].includes(r)?{data:E?Object.keys(u).reduce((h,R)=>(h.append(R,u[R]),h),new FormData):u}:{},...[T.GET,T.DELETE,T.OPTIONS,T.HEAD].includes(r)?{params:u}:{},...l});return[d.BLOB,d.STREAM,d.DOCUMENT,d.ARRAY_BUFFER].includes(f)||D?a:a.data}catch(a){throw a}}},P=t=>Object.prototype.toString.call(t)==="[object Array]";function g(t){return t==null?!0:typeof t=="boolean"?!1:typeof t=="number"?isNaN(t)||t===0:typeof t=="string"?t.trim().length===0:P(t)?t.length===0:m(t)?Object.keys(t).length===0:t instanceof Map||t instanceof Set?t.size===0:!1}const m=t=>t!==null&&(typeof t=="object"||typeof t=="function")&&!P(t)&&!(t instanceof Date)&&!(t instanceof Map),M=(t,e)=>{const s={...t};return e.forEach(n=>{delete s[n]}),s},b=(t,e)=>t.replace(/{([^{]*)}/g,(s,n)=>e[n]),y=t=>{const[e]=t.split("?");return e},p=(t,e)=>!t||!(e!=null&&e.length)?{}:e.reduce((s,n)=>({...s,[n]:t[n]}),{}),x=(t,e,s,n)=>[t,p(e,s),p(e,n)],F=(t,e,s,n,i,o)=>{const r=M(t,[...o||[],...i||[]]);return[e||s?r:p(r,n||[]),p(t,i),p(t,o)]},C=/\s{1,}/,j="*",H=/\s\[d|(data)]\s?/,L=/\s(d|(data))\.(f|formData):/,q=/\s+(d|data)(\.(f|formData))?:(\S*)(\s|$)/,B=/\s+path:(\S*)(\s|$)/,Y=/\s+(q|query):(\S*)(\s|$)/,G=t=>{const[e,s]=t.split(C);return{method:e,url:s}},Q=t=>{const[,e]=t.match(B)||[];return(e==null?void 0:e.split(","))||[]},$=t=>{const[,,e]=t.match(Y)||[];return(e==null?void 0:e.split(","))||[]},w=t=>{const[,,,,e]=t.match(q)||[];return(e==null?void 0:e.split(","))||[]},J=t=>H.test(t),z=t=>L.test(t),W=t=>!!(t!=null&&t.length)&&t[0]===j,X=(t,e)=>{const s=Q(e),n=$(e),i=w(e),o=!!s.length,r=J(e),O=r?!1:z(e),u=W(i);return(...D)=>{const[E,S={},A={}]=D,[f,l,a]=r?x(E,S,s,n):F(E,u,O,i,s,n),{method:h,url:R}=G(e),Z=o?b(R,l):R,k=g(a)?"":`?${_.stringify(a)}`;return t({url:`${y(Z)}${k}`,method:h.toLocaleUpperCase(),...m(f)&&!P(f)&&g(f)?{}:{params:f},...M(A,["url","data","method","params","returnResponse"]),...O?{__isFormData:O}:{},...A.returnResponse?{returnResponse:!0}:{}})}},V=t=>{const e=U(t);return{generatorAPIS:n=>Object.keys(n).reduce((i,o)=>({...i,[o]:X(e,n[o])}),{}),requestInstance:e}};c.init=V,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});
