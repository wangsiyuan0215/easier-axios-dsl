(function(r,f){typeof exports=="object"&&typeof module<"u"?f(exports,require("axios"),require("qs")):typeof define=="function"&&define.amd?define(["exports","axios","qs"],f):(r=typeof globalThis<"u"?globalThis:r||self,f(r["easier-axios-dsl"]={},r.axios,r.qs))})(this,function(r,f,U){"use strict";const P={JSON:"application/json",FORM_DATA:"multipart/form-data"},A={GET:"GET",PUT:"PUT",POST:"POST",DELETE:"DELETE"},j=({requestInterceptors:t,responseInterceptors:e,...s})=>{const n=f.create({timeout:6e4,...s});return t.length&&n.interceptors.request.use(...t),e.length&&n.interceptors.response.use(...e),async function({url:c,method:o,params:i,...D},u=!1){const{headers:E={},...O}=D||{};try{const{data:d}=await n({url:c,method:o,headers:{"Content-Type":u?P.FORM_DATA:P.JSON,...E},...o===A.POST||o===A.PUT?{data:u?Object.keys(i).reduce((h,p)=>(h.append(p,i[p]),h),new FormData):i}:{},...o===A.GET||o===A.DELETE?{params:i}:{},...O});return d}catch(d){throw d}}},l=t=>Object.prototype.toString.call(t)==="[object Array]";function m(t){return t==null?!0:typeof t=="boolean"?!1:typeof t=="number"?isNaN(t)||t===0:typeof t=="string"?t.trim().length===0:l(t)?t.length===0:R(t)?Object.keys(t).length===0:t instanceof Map||t instanceof Set?t.size===0:!1}const R=t=>t!==null&&(typeof t=="object"||typeof t=="function")&&!l(t)&&!(t instanceof Date)&&!(t instanceof Map),M=(t,e)=>{const s={...t};return e.forEach(n=>{delete s[n]}),s},N=(t,e)=>t.replace(/{([^{]*)}/g,(s,n)=>e[n]),y=/\s{1,}/,I="*",S=/\s\[d|(data)]\s?/,C=/\s(d|(data))\.(f|formData):/,F=/\s+(d|data)(\.(f|formData))?:(\S*)(\s|$)/,G=/\s+path:(\S*)(\s|$)/,q=/\s+(q|query):(\S*)(\s|$)/,T=(t,e)=>!t||!(e!=null&&e.length)?{}:e.reduce((s,n)=>({...s,[n]:t[n]}),{}),x=t=>{const[e]=t.split("?");return e},L=(t,e,s,n)=>[t,T(e,s),T(e,n)],$=(t,e,s,n,a,c)=>{const o=M(t,[...c||[],...a||[]]);return[e||s?o:T(o,(n==null?void 0:n.split(","))||[]),T(t,a),T(t,c)]},g=(t,e)=>{const[s,n]=e.split(y),a=S.test(e),[,c]=e.match(G)||[],[,,o]=e.match(q)||[],[,,,,i]=e.match(F)||[],D=!!c,u=(c==null?void 0:c.split(","))||[],E=(o==null?void 0:o.split(","))||[],O=a?!1:C.test(e),d=i===I;return(...h)=>{const[p,H={},Q={}]=h,[_,Y,b]=a?L(p,H,u,E):$(p,d,O,i,u,E),J=D?N(n,Y):n,z=m(b)?"":`?${U.stringify(b)}`;return t({url:`${x(J)}${z}`,method:s.toLocaleUpperCase(),...R(_)&&!l(_)&&m(_)?{}:{params:_},...M(Q,["url","data","method","params"])},O)}},w=(t,e)=>Object.keys(e).reduce((s,n)=>({...s,[n]:g(t,e[n])}),{});r.G=w,r.requestCreator=j,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
